{{ 'section-newsletter-signup.css' | asset_url | stylesheet_tag }}

<div class="newsletter-signup color-{{ section.settings.color_scheme }} gradient section-padding">
  <div class="page-width">
    <div class="newsletter-content text-center">
      <div class="newsletter-header">
        {% if section.settings.heading != blank %}
          <h2 class="newsletter-title">{{ section.settings.heading | escape }}</h2>
        {% endif %}
        {% if section.settings.subheading != blank %}
          <p class="newsletter-subheading">{{ section.settings.subheading | escape }}</p>
        {% endif %}
      </div>

      {% form 'customer', class: 'newsletter-form', id: 'newsletter-form' %}
        <input type="hidden" name="contact[tags]" value="newsletter">
        
        <div class="newsletter-form-wrapper">
          <div class="field">
            <input
              type="email"
              name="contact[email]"
              class="field__input newsletter-input"
              placeholder="{{ 'newsletter.label' | t }}"
              aria-label="{{ 'newsletter.label' | t }}"
              required
            >
            <label class="field__label newsletter-label" for="newsletter-email">
              {{ 'newsletter.label' | t }}
            </label>
          </div>
          
          <button
            type="submit"
            class="button button--primary newsletter-button"
            name="commit"
            aria-label="{{ 'newsletter.button_label' | t }}"
          >
            {{ section.settings.button_text | default: 'Subscribe' | escape }}
          </button>
        </div>

        {% if form.posted_successfully? %}
          <div class="newsletter-message newsletter-message--success">
            {{ 'newsletter.success' | t }}
          </div>
        {% elsif form.errors %}
          <div class="newsletter-message newsletter-message--error">
            {{ form.errors | default_errors }}
          </div>
        {% endif %}
      {% endform %}

      {% if section.settings.privacy_text != blank %}
        <p class="newsletter-privacy">{{ section.settings.privacy_text | escape }}</p>
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Newsletter Signup",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Stay in the loop"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Get the latest beauty tips, new arrivals, and exclusive offers delivered to your inbox."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Subscribe"
    },
    {
      "type": "text",
      "id": "privacy_text",
      "label": "Privacy text",
      "default": "We respect your privacy. Unsubscribe at any time."
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "background-1",
          "label": "Background 1"
        },
        {
          "value": "background-2",
          "label": "Background 2"
        },
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        }
      ],
      "default": "background-2",
      "label": "Color scheme"
    }
  ],
  "presets": [
    {
      "name": "Newsletter Signup"
    }
  ]
}
{% endschema %}
